(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ranking~ratio~ratio-population~31ecd969"],{"0ec5":function(a,t,e){"use strict";var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"ranking-card"},[e("Card",{class:["card-"+a.myCase[0],"card-"+a.myCase[0]+"--"+a.myCase[1]],scopedSlots:a._u([{key:"header",fn:function(){return[e("h6",[a._v(a._s(a.title))]),e("menu",[e("a",{staticClass:"fullscreen show-for-large",attrs:{title:"resize card","aria-label":"resize card"},on:{click:a.fullscreenOnClick}},[e("i",{staticClass:"icon-window-maximize"})])])]},proxy:!0},{key:"mainImage",fn:function(){return[e("canvas",{attrs:{id:a.myCase[0]+"_"+a.myCase[1].toUpperCase()}})]},proxy:!0},{key:"menu",fn:function(){return[e("div",{staticClass:"grid-x"},[e("div",{staticClass:"cell small-6"},[e("label",{attrs:{for:"periods_"+a.myCase.join("-")}},[a._v("Periods")])]),e("div",{staticClass:"cell auto"},[e("div",{staticClass:"periods"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.rankPeriods,expression:"rankPeriods"}],attrs:{id:"periods_"+a.myCase.join("-")},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){var t="_value"in a?a._value:a.value;return t}));a.rankPeriods=t.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"0"}},[a._v("All Time")]),e("option",{attrs:{value:"1"}},[a._v("Last day")]),e("option",{attrs:{value:"3"}},[a._v("Last 3 day")]),e("option",{attrs:{value:"7"}},[a._v("Last week")]),e("option",{attrs:{value:"14"}},[a._v("Last 2 weeks")]),e("option",{attrs:{value:"28"}},[a._v("Last 4 weeks")])])])])]),e("div",{staticClass:"float-right"},[e("a",{staticClass:"download-card",attrs:{title:"download card","aria-label":"download card"},on:{click:a.downloadOnClick}},[e("i",{staticClass:"icon-floppy"})]),e("a",{staticClass:"share",attrs:{title:"share","aria-label":"share"},on:{click:a.shareOnClick}},[e("i",{staticClass:"icon-share"})])])]},proxy:!0}])}),e("Dialog",{model:{value:a.modelDialog,callback:function(t){a.modelDialog=t},expression:"modelDialog"}},[e(a.componentChart,{tag:"component",attrs:{zone:a.modelChart.zone},model:{value:a.modelChart,callback:function(t){a.modelChart=t},expression:"modelChart"}})],1)],1)},s=[],o=e("a34a"),r=e.n(o),i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"capture"},[e("header",{staticClass:"card-divider"},[a._t("header")],2),e("main",{staticClass:"card-section"},[a._t("main")],2),e("main",{staticClass:"card-image"},[a._t("mainImage")],2)]),e("menu",{staticClass:"card-section"},[a._t("menu")],2)])},c=[],l={name:"Card",props:{value:Object}},d=l,u=(e("9f8a"),e("2877")),m=Object(u["a"])(d,i,c,!1,null,"32ad9b4a",null),p=m.exports,h=e("3f7a"),f=e("2375"),v=e("a59d"),C={components:{ZoneCard:v["a"]},data:function(){return{modelDialog:{isOpen:!1,isCollapse:!0},componentChart:null}},watch:{"modelDialog.isOpen":function(a,t){this.componentChart=a?v["a"]:null}}},k=C,y=e("6afe"),g=e("9424"),w=e("eafc"),b=e.n(w),x=e("0644"),_=e.n(x),P=(e("b047c"),e("4cfe")),D=e.n(P),I=e("1946");function O(a,t,e,n,s,o,r){try{var i=a[o](r),c=i.value}catch(l){return void e(l)}i.done?t(c):Promise.resolve(c).then(n,s)}function L(a){return function(){var t=this,e=arguments;return new Promise((function(n,s){var o=a.apply(t,e);function r(a){O(o,n,s,r,i,"next",a)}function i(a){O(o,n,s,r,i,"throw",a)}r(void 0)}))}}var U={name:"RankingCard",mixins:[k,y["a"],g["a"]],components:{Card:p,Spinner:f["a"],Dialog:h["a"]},props:{myCase:Array,value:Object},data:function(){return{chartInstance:null,data:_()(I["c"]),modelSpinner:{isOpen:!0},modelDialog:{isOpen:!1},modelChart:{zone:null,isDialog:!0}}},computed:{rankPeriods:{get:function(){return this.value.rankPeriods?this.value.rankPeriods:I["f"]},set:function(a){this.updateQuery("rankPeriods",a,I["f"]),this.emitModel({rankPeriods:a})}},title:function(){var a,t="all time";switch(this.rankPeriods){case"1":t="last day";break;case"3":t="last 3 day";break;case"7":t="last week";break;case"14":t="last 2 weeks";break;case"28":t="last 4 weeks";break}switch(this.myCase[0]){case"ranking":a="".concat(this.myCase[1]," Case ").concat(this.myCase[0]);case"ratio":var e;switch(this.myCase[1]){case"recover":e="recovery";break;case"death":e="fatality";break;default:e=this.myCase[1]}a="Case ".concat(e," ").concat(this.myCase[0]);break;case"ratio-population":a="".concat(this.myCase[1]," Case per 1M Population");break;default:a="".concat(this.myCase[1]," ").concat(this.myCase[0])}return"".concat(a," ").concat(t)}},watch:{rankPeriods:function(a,t){this.updateData()}},methods:{updateData:function(){var a=this;L(r.a.mark((function t(){var e,n,s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="https://raw.githubusercontent.com/aiosk/covidn/master/dist/web/stats/".concat(a.rankPeriods,"/").concat(a.myCase.join("-"),".csv?_=").concat(Date.now()),t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:if(s=t.sent,a.rankingFromCsv(s),a.chartInstance){t.next=10;break}return t.abrupt("return");case 10:a.chartInstance.update(),a.modelSpinner.isOpen=!1;case 12:case"end":return t.stop()}}),t)})))()}},created:function(){var a=this.$route.query.rankPeriods;a&&(this.rankPeriods=a),this.updateData()},mounted:function(){var a=this,t=this;b()((function(){if(!a.chartInstance){var n=64;"ranking"==a.myCase[0]&&(n+=80),"ratio"==a.myCase[0]&&(n+=32),"ratio-population"==a.myCase[0]&&(n+=32);var s=e("b16f"),o=s.initChartRanking;a.chartInstance=o({elementId:"".concat(a.myCase[0],"_").concat(a.myCase[1].toUpperCase()),data:a.data,rightPadding:n,onClick:function(a,e){var n;if(this.getElementsAtEventForMode(a,"y",1).forEach((function(a){n=a._index})),!D()(n)){var s=t.data.labels[n];t.modelChart.zone=s,t.data.datasets[0].population[n]&&(t.modelChart.population=t.data.datasets[0].population[n]),t.modelDialog.isOpen=!0}},datalabelsFormatter:function(a,e){var n=t.data.datasets[0].percentage[e.dataIndex],s=new Date(t.data.datasets[0].lastUpdate[e.dataIndex]),o={month:"short",day:"numeric"},r=s.toLocaleDateString("en-US",o),i=e.dataIndex+1;return n?"#".concat(i," | ").concat(a," | ").concat(n,"% | ").concat(r):"ratio"==t.myCase[0]?"#".concat(i," | ").concat(a,"% | ").concat(r):"#".concat(i," | ").concat(a," | ").concat(r)},tooltipsCallbackLabel:function(a,e){var n=e.datasets[a.datasetIndex].data[a.index],s=t.data.datasets[0].percentage[a.datasetIndex],o=new Date(t.data.datasets[0].lastUpdate[a.datasetIndex]),r={month:"short",day:"numeric"},i=o.toLocaleDateString("en-US",r),c=t.toTitleCase(t.myCase[1]);return s?["".concat(c,": ").concat(n),"Percentage: ".concat(s,"%"),"Last Update: ".concat(i)]:"ratio"==t.myCase[0]?["".concat(c,": ").concat(n,"%"),"Last Update: ".concat(i)]:["".concat(c,": ").concat(n),"Last Update: ".concat(i)]}})}}),9)},destroyed:function(){this.chartInstance&&this.chartInstance.destroy(),this.data=_()(I["c"])}},S=U,j=(e("f5fa"),Object(u["a"])(S,n,s,!1,null,null,null));t["a"]=j.exports},"2dd7":function(a,t,e){},"4cfe":function(a,t){function e(a){return void 0===a}a.exports=e},5492:function(a,t,e){var n=e("32b3"),s=e("d70d");function o(a,t){return s(a||[],t||[],n)}a.exports=o},"9f8a":function(a,t,e){"use strict";var n=e("2dd7"),s=e.n(n);s.a},b76e:function(a,t,e){},d70d:function(a,t){function e(a,t,e){var n=-1,s=a.length,o=t.length,r={};while(++n<s){var i=n<o?t[n]:void 0;e(r,a[n],i)}return r}a.exports=e},f5fa:function(a,t,e){"use strict";var n=e("b76e"),s=e.n(n);s.a}}]);