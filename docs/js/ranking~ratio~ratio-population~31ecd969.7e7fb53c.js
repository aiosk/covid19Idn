(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ranking~ratio~ratio-population~31ecd969"],{"0ec5":function(a,t,e){"use strict";var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"ranking-card"},[e("Card",{class:["card-"+a.myCase[0],"card-"+a.myCase[0]+"--"+a.myCase[1]],scopedSlots:a._u([{key:"header",fn:function(){return[e("h6",[a._v(a._s(a.title))]),e("menu",[e("a",{staticClass:"fullscreen show-for-large",attrs:{title:"resize card","aria-label":"resize card"},on:{click:a.fullscreenOnClick}},[e("i",{staticClass:"icon-window-maximize"})])])]},proxy:!0},{key:"mainImage",fn:function(){return[e("canvas",{attrs:{id:a.myCase[0]+"_"+a.myCase[1].toUpperCase()}})]},proxy:!0},{key:"menu",fn:function(){return[e("div",{staticClass:"grid-x"},[e("div",{staticClass:"cell small-6"},[e("label",{attrs:{for:"periods_"+a.myCase.join("-")}},[a._v("Periods")])]),e("div",{staticClass:"cell auto"},[e("div",{staticClass:"periods"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.periods,expression:"periods"}],attrs:{id:"periods_"+a.myCase.join("-")},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(a){return a.selected})).map((function(a){var t="_value"in a?a._value:a.value;return t}));a.periods=t.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"0"}},[a._v("All Time")]),e("option",{attrs:{value:"1"}},[a._v("Last day")]),e("option",{attrs:{value:"3"}},[a._v("Last 3 day")]),e("option",{attrs:{value:"7"}},[a._v("Last week")]),e("option",{attrs:{value:"14"}},[a._v("Last 2 weeks")]),e("option",{attrs:{value:"28"}},[a._v("Last 4 weeks")])])])])]),e("div",{staticClass:"float-right"},[e("a",{staticClass:"download-card",attrs:{title:"download card","aria-label":"download card"},on:{click:a.downloadOnClick}},[e("i",{staticClass:"icon-floppy"})]),e("a",{staticClass:"share",attrs:{title:"share","aria-label":"share"},on:{click:a.shareOnClick}},[e("i",{staticClass:"icon-share"})])])]},proxy:!0}])}),e("Dialog",{model:{value:a.modelDialog,callback:function(t){a.modelDialog=t},expression:"modelDialog"}},[e(a.componentChart,{tag:"component",attrs:{zone:a.modelChart.zone},model:{value:a.modelChart,callback:function(t){a.modelChart=t},expression:"modelChart"}})],1)],1)},s=[],o=e("a34a"),c=e.n(o),r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"capture"},[e("header",{staticClass:"card-divider"},[a._t("header")],2),e("main",{staticClass:"card-section"},[a._t("main")],2),e("main",{staticClass:"card-image"},[a._t("mainImage")],2)]),e("menu",{staticClass:"card-section"},[a._t("menu")],2)])},i=[],l={name:"Card",props:{value:Object}},d=l,u=(e("9f8a"),e("2877")),p=Object(u["a"])(d,r,i,!1,null,"32ad9b4a",null),m=p.exports,f=e("3f7a"),h=e("2375"),v=e("a59d"),C={components:{ZoneCard:v["a"]},data:function(){return{modelDialog:{isOpen:!1,isCollapse:!0},componentChart:null}},watch:{"modelDialog.isOpen":function(a,t){this.componentChart=a?v["a"]:null}}},y=C,g=e("6afe"),b=e("9424"),w=e("eafc"),k=e.n(w),x=e("0644"),_=e.n(x),D=(e("b047c"),e("4cfe")),I=e.n(D),O=e("1946");function L(a,t,e,n,s,o,c){try{var r=a[o](c),i=r.value}catch(l){return void e(l)}r.done?t(i):Promise.resolve(i).then(n,s)}function U(a){return function(){var t=this,e=arguments;return new Promise((function(n,s){var o=a.apply(t,e);function c(a){L(o,n,s,c,r,"next",a)}function r(a){L(o,n,s,c,r,"throw",a)}c(void 0)}))}}var S={name:"RankingCard",mixins:[y,g["a"],b["a"]],components:{Card:m,Spinner:h["a"],Dialog:f["a"]},props:{myCase:Array,value:Object},data:function(){return{chartInstance:null,data:_()(O["c"]),modelSpinner:{isOpen:!0},modelDialog:{isOpen:!1},modelChart:{zone:null,isDialog:!0}}},computed:{periods:{get:function(){return this.value.periods?this.value.periods:0},set:function(a){this.emitModel({periods:a})}},title:function(){switch(this.myCase[0]){case"ranking":return"".concat(this.myCase[1]," Case ").concat(this.myCase[0]);case"ratio":var a;switch(this.myCase[1]){case"recover":a="recovery";break;case"death":a="fatality";break;default:a=this.myCase[1]}return"Case ".concat(a," ").concat(this.myCase[0]);case"ratio-population":return"".concat(this.myCase[1]," Case per 1M Population");default:return"".concat(this.myCase[1]," ").concat(this.myCase[0])}}},watch:{periods:function(a,t){this.updateData()}},methods:{updateData:function(){var a=this;U(c.a.mark((function t(){var e,n,s,o;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="https://raw.githubusercontent.com/aiosk/covidn/master/cli/dist/web/stats/".concat(a.periods,"/").concat(a.myCase.join("-"),".csv?_=").concat(Date.now()),t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:if(s=t.sent,a.rankingFromCsv(s),a.data.datasets[0].datalabels||a.$set(a.data.datasets[0],"datalabels",{align:[],color:[]}),o=2,a.data.datasets[0].data.length,a.data.datasets[0].data.forEach((function(t,e){a.$set(a.data.datasets[0].datalabels.align,e,e<o?"start":"end"),a.$set(a.data.datasets[0].datalabels.color,e,e<o?"#fff":"#000")})),a.chartInstance){t.next=14;break}return t.abrupt("return");case 14:a.chartInstance.update(),a.modelSpinner.isOpen=!1;case 16:case"end":return t.stop()}}),t)})))()}},created:function(){this.updateData()},mounted:function(){var a=this,t=this;k()((function(){if(!a.chartInstance){var n=e("b16f"),s=n.initChartRanking;a.chartInstance=s({elementId:"".concat(a.myCase[0],"_").concat(a.myCase[1].toUpperCase()),data:a.data,onClick:function(a,e){var n;if(this.getElementsAtEventForMode(a,"y",1).forEach((function(a){n=a._index})),!I()(n)){var s=t.data.labels[n].replace(/ /g,"_");t.modelChart.zone=s,t.data.datasets[0].population[n]&&(t.modelChart.population=t.data.datasets[0].population[n]),t.modelDialog.isOpen=!0}},datalabelsFormatter:function(a,e){var n=t.data.datasets[0].percentage[e.dataIndex],s=new Date(t.data.datasets[0].lastUpdate[e.dataIndex]),o={month:"short",day:"numeric"},c=s.toLocaleDateString("en-US",o);return n?"".concat(a," (").concat(n,"%) (").concat(c,")"):"ratio"==t.myCase[0]?"".concat(a,"% (").concat(c,")"):"".concat(a," (").concat(c,")")},tooltipsCallbackLabel:function(a,e){var n=e.datasets[a.datasetIndex].data[a.index],s=t.data.datasets[0].percentage[a.datasetIndex],o=new Date(t.data.datasets[0].lastUpdate[a.datasetIndex]),c={month:"short",day:"numeric"},r=o.toLocaleDateString("en-US",c);return s?["".concat(t.myCase[1],": ").concat(n),"Percentage: ".concat(s,"%"),"Last Update: ".concat(r)]:"ratio"==t.myCase[0]?["".concat(t.myCase[1],": ").concat(n,"%"),"Last Update: ".concat(r)]:["".concat(t.myCase[1],": ").concat(n),"Last Update: ".concat(r)]}})}}),9)},destroyed:function(){this.chartInstance&&this.chartInstance.destroy(),this.data=_()(O["c"])}},j=S,z=(e("f5fa"),Object(u["a"])(j,n,s,!1,null,null,null));t["a"]=z.exports},"2dd7":function(a,t,e){},"4cfe":function(a,t){function e(a){return void 0===a}a.exports=e},5492:function(a,t,e){var n=e("32b3"),s=e("d70d");function o(a,t){return s(a||[],t||[],n)}a.exports=o},"9f8a":function(a,t,e){"use strict";var n=e("2dd7"),s=e.n(n);s.a},b76e:function(a,t,e){},d70d:function(a,t){function e(a,t,e){var n=-1,s=a.length,o=t.length,c={};while(++n<s){var r=n<o?t[n]:void 0;e(c,a[n],r)}return c}a.exports=e},f5fa:function(a,t,e){"use strict";var n=e("b76e"),s=e.n(n);s.a}}]);