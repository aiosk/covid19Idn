(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ranking~ratio~ratio-population~31ecd969"],{"0ec5":function(a,t,e){"use strict";var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"ranking-card"},[e("Card",{class:["card-"+a.myCase[0],"card-"+a.myCase[0]+"--"+a.myCase[1]],scopedSlots:a._u([{key:"header",fn:function(){return[e("h6",[a._v(a._s(a.title))]),e("menu",[e("a",{staticClass:"fullscreen show-for-large",attrs:{title:"resize card","aria-label":"resize card"},on:{click:a.fullscreenOnClick}},[e("i",{staticClass:"icon-window-maximize"})])])]},proxy:!0},{key:"mainImage",fn:function(){return[e("canvas",{attrs:{id:a.myCase[0]+"_"+a.myCase[1].toUpperCase()}})]},proxy:!0},{key:"menu",fn:function(){return[e("a",{staticClass:"download-card",attrs:{title:"download card","aria-label":"download card"},on:{click:a.downloadOnClick}},[e("i",{staticClass:"icon-download-cloud"})]),e("a",{staticClass:"share",attrs:{title:"share","aria-label":"share"},on:{click:a.shareOnClick}},[e("i",{staticClass:"icon-share"})])]},proxy:!0}])}),e("Dialog",{model:{value:a.modelDialog,callback:function(t){a.modelDialog=t},expression:"modelDialog"}},[e(a.componentChart,{tag:"component",attrs:{zone:a.modelChart.zone},model:{value:a.modelChart,callback:function(t){a.modelChart=t},expression:"modelChart"}})],1)],1)},s=[],c=e("a34a"),r=e.n(c),o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"capture"},[e("header",{staticClass:"card-divider"},[a._t("header")],2),e("main",{staticClass:"card-section"},[a._t("main")],2),e("main",{staticClass:"card-image"},[a._t("mainImage")],2)]),e("menu",{staticClass:"card-section"},[a._t("menu")],2)])},i=[],l={name:"Card",props:{value:Object}},d=l,u=(e("9f8a"),e("2877")),h=Object(u["a"])(d,o,i,!1,null,"32ad9b4a",null),m=h.exports,f=e("3f7a"),p=e("a59d"),C={components:{ZoneCard:p["a"]},data:function(){return{modelDialog:{isOpen:!1,isCollapse:!0},componentChart:null}},watch:{"modelDialog.isOpen":function(a,t){this.componentChart=a?p["a"]:null}}},v=C,y=e("6afe"),b=e("eafc"),g=e.n(b),k=e("0644"),w=e.n(k),x=e("b047c"),_=e.n(x),D=e("4cfe"),I=e.n(D),O=e("1946");function z(a,t,e,n,s,c,r){try{var o=a[c](r),i=o.value}catch(l){return void e(l)}o.done?t(i):Promise.resolve(i).then(n,s)}function E(a){return function(){var t=this,e=arguments;return new Promise((function(n,s){var c=a.apply(t,e);function r(a){z(c,n,s,r,o,"next",a)}function o(a){z(c,n,s,r,o,"throw",a)}r(void 0)}))}}var $={name:"RankingCard",mixins:[v,y["a"]],components:{Card:m,Dialog:f["a"]},props:{myCase:Array},computed:{title:function(){switch(this.myCase[0]){case"ranking":return"".concat(this.myCase[1]," Case ").concat(this.myCase[0]);case"ratio":var a;switch(this.myCase[1]){case"recover":a="recovery";break;case"death":a="fatality";break;default:a=this.myCase[1]}return"Case ".concat(a," ").concat(this.myCase[0]);case"ratio-population":return"".concat(this.myCase[1]," Case per 1M Population");default:return"".concat(this.myCase[1]," ").concat(this.myCase[0])}}},data:function(){return{chartInstance:null,data:w()(O["c"]),modelChart:{zone:null,isDialog:!0}}},watch:{data:_()((function(a,t){console.log(a),this.chartInstance&&this.chartInstance.update()}),500)},created:function(){var a=this;E(r.a.mark((function t(){var e,n,s,c;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="https://raw.githubusercontent.com/aiosk/covidn/develop/cli/dist/web/stats/".concat(a.myCase.join("-"),".csv?_=").concat(Date.now()),t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:s=t.sent,a.rankingFromCsv(s),a.data.datasets[0].datalabels||a.$set(a.data.datasets[0],"datalabels",{align:[],color:[]}),t.t0=a.myCase[0],t.next="ratio"===t.t0?12:"ratio-population"===t.t0?14:21;break;case 12:return c=10,t.abrupt("break",22);case 14:t.t1=a.myCase[1],t.next="death"===t.t1?17:19;break;case 17:return c=2,t.abrupt("break",20);case 19:c=3;case 20:return t.abrupt("break",22);case 21:c=2;case 22:a.data.datasets[0].data.length,a.data.datasets[0].data.forEach((function(t,e){a.$set(a.data.datasets[0].datalabels.align,e,e<c?"start":"end"),a.$set(a.data.datasets[0].datalabels.color,e,e<c?"#fff":"#000")}));case 24:case"end":return t.stop()}}),t)})))()},mounted:function(){var a=this,t=this;g()((function(){if(!a.chartInstance){var n=e("b16f"),s=n.initChartRanking;a.chartInstance=s({elementId:"".concat(a.myCase[0],"_").concat(a.myCase[1].toUpperCase()),data:a.data,onClick:function(a,e){var n;if(this.getElementsAtEventForMode(a,"y",1).forEach((function(a){n=a._index})),!I()(n)){var s=t.data.labels[n].replace(/ /g,"_");t.modelChart.zone=s,t.data.datasets[0].population[n]&&(t.modelChart.population=t.data.datasets[0].population[n]),t.modelDialog.isOpen=!0}},datalabelsFormatter:function(a,e){var n=t.data.datasets[0].percentage[e.dataIndex],s=new Date(t.data.datasets[0].lastUpdate[e.dataIndex]),c={month:"short",day:"numeric"},r=s.toLocaleDateString("en-US",c);return n?"".concat(a," (").concat(n,"%) (").concat(r,")"):"ratio"==t.myCase[0]?"".concat(a,"% (").concat(r,")"):"".concat(a," (").concat(r,")")}})}}),299)},destroyed:function(){this.chartInstance&&this.chartInstance.destroy(),this.data=w()(O["c"])}},j=$,U=(e("f5fa"),Object(u["a"])(j,n,s,!1,null,null,null));t["a"]=U.exports},"2dd75":function(a,t,e){},"4cfe":function(a,t){function e(a){return void 0===a}a.exports=e},5492:function(a,t,e){var n=e("32b3"),s=e("d70d");function c(a,t){return s(a||[],t||[],n)}a.exports=c},"9f8a":function(a,t,e){"use strict";var n=e("2dd75"),s=e.n(n);s.a},b76e:function(a,t,e){},d70d:function(a,t){function e(a,t,e){var n=-1,s=a.length,c=t.length,r={};while(++n<s){var o=n<c?t[n]:void 0;e(r,a[n],o)}return r}a.exports=e},f5fa:function(a,t,e){"use strict";var n=e("b76e"),s=e.n(n);s.a}}]);