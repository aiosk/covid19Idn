(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ranking~ratio~ratio-population~31ecd969"],{"0ec5":function(a,t,e){"use strict";var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"ranking-card"},[e("Card",{class:["card-"+a.myCase[0],"card-"+a.myCase[0]+"--"+a.myCase[1]],scopedSlots:a._u([{key:"header",fn:function(){return[e("h6",[a._v(a._s(a.title))]),e("menu",[e("a",{staticClass:"fullscreen show-for-large",attrs:{title:"resize card","aria-label":"resize card"},on:{click:a.fullscreenOnClick}},[e("i",{staticClass:"icon-window-maximize"})])])]},proxy:!0},{key:"mainImage",fn:function(){return[e("canvas",{attrs:{id:a.myCase[0]+"_"+a.myCase[1].toUpperCase()}})]},proxy:!0},{key:"menu",fn:function(){return[e("a",{staticClass:"download-card",attrs:{title:"download card","aria-label":"download card"},on:{click:a.downloadOnClick}},[e("i",{staticClass:"icon-floppy"})]),e("a",{staticClass:"share",attrs:{title:"share","aria-label":"share"},on:{click:a.shareOnClick}},[e("i",{staticClass:"icon-share"})])]},proxy:!0}])}),e("Dialog",{model:{value:a.modelDialog,callback:function(t){a.modelDialog=t},expression:"modelDialog"}},[e(a.componentChart,{tag:"component",attrs:{zone:a.modelChart.zone},model:{value:a.modelChart,callback:function(t){a.modelChart=t},expression:"modelChart"}})],1),e("Spinner",{model:{value:a.modelSpinner,callback:function(t){a.modelSpinner=t},expression:"modelSpinner"}})],1)},s=[],r=e("a34a"),c=e.n(r),o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"capture"},[e("header",{staticClass:"card-divider"},[a._t("header")],2),e("main",{staticClass:"card-section"},[a._t("main")],2),e("main",{staticClass:"card-image"},[a._t("mainImage")],2)]),e("menu",{staticClass:"card-section"},[a._t("menu")],2)])},i=[],l={name:"Card",props:{value:Object}},d=l,u=(e("9f8a"),e("2877")),m=Object(u["a"])(d,o,i,!1,null,"32ad9b4a",null),p=m.exports,f=e("3f7a"),h=e("2375"),C=e("a59d"),v={components:{ZoneCard:C["a"]},data:function(){return{modelDialog:{isOpen:!1,isCollapse:!0},componentChart:null}},watch:{"modelDialog.isOpen":function(a,t){this.componentChart=a?C["a"]:null}}},b=v,y=e("6afe"),g=e("eafc"),k=e.n(g),w=e("0644"),x=e.n(w),_=(e("b047c"),e("4cfe")),D=e.n(_),I=e("1946");function O(a,t,e,n,s,r,c){try{var o=a[r](c),i=o.value}catch(l){return void e(l)}o.done?t(i):Promise.resolve(i).then(n,s)}function S(a){return function(){var t=this,e=arguments;return new Promise((function(n,s){var r=a.apply(t,e);function c(a){O(r,n,s,c,o,"next",a)}function o(a){O(r,n,s,c,o,"throw",a)}c(void 0)}))}}var z={name:"RankingCard",mixins:[b,y["a"]],components:{Card:p,Spinner:h["a"],Dialog:f["a"]},props:{myCase:Array},computed:{title:function(){switch(this.myCase[0]){case"ranking":return"".concat(this.myCase[1]," Case ").concat(this.myCase[0]);case"ratio":var a;switch(this.myCase[1]){case"recover":a="recovery";break;case"death":a="fatality";break;default:a=this.myCase[1]}return"Case ".concat(a," ").concat(this.myCase[0]);case"ratio-population":return"".concat(this.myCase[1]," Case per 1M Population");default:return"".concat(this.myCase[1]," ").concat(this.myCase[0])}}},data:function(){return{chartInstance:null,data:x()(I["c"]),modelSpinner:{isOpen:!0},modelDialog:{isOpen:!1},modelChart:{zone:null,isDialog:!0}}},created:function(){var a=this;S(c.a.mark((function t(){var e,n,s,r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="https://raw.githubusercontent.com/aiosk/covidn/master/cli/dist/web/stats/".concat(a.myCase.join("-"),".csv?_=").concat(Date.now()),t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:s=t.sent,a.rankingFromCsv(s),a.data.datasets[0].datalabels||a.$set(a.data.datasets[0],"datalabels",{align:[],color:[]}),t.t0=a.myCase[0],t.next="ratio"===t.t0?12:"ratio-population"===t.t0?14:21;break;case 12:return r=10,t.abrupt("break",22);case 14:t.t1=a.myCase[1],t.next="death"===t.t1?17:19;break;case 17:return r=2,t.abrupt("break",20);case 19:r=3;case 20:return t.abrupt("break",22);case 21:r=2;case 22:if(a.data.datasets[0].data.length,a.data.datasets[0].data.forEach((function(t,e){a.$set(a.data.datasets[0].datalabels.align,e,e<r?"start":"end"),a.$set(a.data.datasets[0].datalabels.color,e,e<r?"#fff":"#000")})),a.chartInstance){t.next=26;break}return t.abrupt("return");case 26:a.chartInstance.update(),a.modelSpinner.isOpen=!1;case 28:case"end":return t.stop()}}),t)})))()},mounted:function(){var a=this,t=this;k()((function(){if(!a.chartInstance){var n=e("b16f"),s=n.initChartRanking;a.chartInstance=s({elementId:"".concat(a.myCase[0],"_").concat(a.myCase[1].toUpperCase()),data:a.data,onClick:function(a,e){var n;if(this.getElementsAtEventForMode(a,"y",1).forEach((function(a){n=a._index})),!D()(n)){var s=t.data.labels[n].replace(/ /g,"_");t.modelChart.zone=s,t.data.datasets[0].population[n]&&(t.modelChart.population=t.data.datasets[0].population[n]),t.modelDialog.isOpen=!0}},datalabelsFormatter:function(a,e){var n=t.data.datasets[0].percentage[e.dataIndex],s=new Date(t.data.datasets[0].lastUpdate[e.dataIndex]),r={month:"short",day:"numeric"},c=s.toLocaleDateString("en-US",r);return n?"".concat(a," (").concat(n,"%) (").concat(c,")"):"ratio"==t.myCase[0]?"".concat(a,"% (").concat(c,")"):"".concat(a," (").concat(c,")")}})}}),9)},destroyed:function(){this.chartInstance&&this.chartInstance.destroy(),this.data=x()(I["c"])}},E=z,$=(e("f5fa"),Object(u["a"])(E,n,s,!1,null,null,null));t["a"]=$.exports},"2dd7":function(a,t,e){},"4cfe":function(a,t){function e(a){return void 0===a}a.exports=e},5492:function(a,t,e){var n=e("32b3"),s=e("d70d");function r(a,t){return s(a||[],t||[],n)}a.exports=r},"9f8a":function(a,t,e){"use strict";var n=e("2dd7"),s=e.n(n);s.a},b76e:function(a,t,e){},d70d:function(a,t){function e(a,t,e){var n=-1,s=a.length,r=t.length,c={};while(++n<s){var o=n<r?t[n]:void 0;e(c,a[n],o)}return c}a.exports=e},f5fa:function(a,t,e){"use strict";var n=e("b76e"),s=e.n(n);s.a}}]);